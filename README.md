
## Описание

- Приложение
	- Реализовать телеграмм бота, который будет выполнять функцию трекера задач
- Задачи
    - Параметры задачи
        - Название
        - Дата ( недели )
        - Дата конкретного дня
        - Дедлайн ( точная дата )
        - Предполагаемое время на выполнение
            - Частые варианты 
            - Пользовательское время
	- Недельные
		- Пул задач
			- Список всех задач за неделю
			- Удобная работа с ним
				- Возможность перенести на следующую неделю
				- Назначить задачу на конкретный день недели
				- Автораспределение всех задач на неделю
	- Возможность добавить дедлайн
		- Возможность настроить как и когда напоминать
	- Можно отмечать, что выполнены
		- Добавить метрики
			- Успел ли в срок
			- Заняло ли это планируемое время
- Стрик
	- Количество дней, когда ты выполнил >= Const% всех задач
	-  За непрерывный стрик даются награды
		- Медальки
		- Возможность пропустить день с сохранением стрика
- Уведомления
	- О том, что у тебя есть невыполненые задачи
	- О том, что надо продлить стрик
	- Поддерживающие сообщения
- Статистика
	- Возможность посмотреть статистику
		- Графики
		- "Сухие" числа
	- Можно добавить логику относительно статистики
		- Бот может анализировать эффективность пользователя и предлагать изменения в планировании.
- Интеграция с гугл календарем
	- Синхронизировать задачи с гугл календарем


### Файловая структура

```bash
project_to_do/
│
├── main.py                     # Основной файл с запуском бота
│
├── handlers/                   # Папка с обработчиками
│   ├── __init__.py
│   ├── callback_query_handler.py   # обработчик inline кнопок
│   └── message_handlers.py     # Обработчики взаимодействий с ботом
│
├── models/                     # Папка с моделями
│   ├── __init__.py
│   ├── keyboards.py            # Модели клавиатур для бота
│   ├── messages.py             # Модель шаблонных сообщений
│   ├── user.py                 # Модель пользователя
│   └── task.py                 # Модель задачи
│
├── database_tables/            # Папка с таблицами базы данных
│   ├── base_database.py        # Начальный класс для sqlalcemy
│   └── user_database.py        # Модель таблицы User
├── repositories/               # Папка с репозиториями
│   ├── __init__.py
│   ├── database_interface.py   # Интерфейс для базы данных
│   ├── sqlalchemy_repository.py      # Репозиторий для Sqlalchemy
│   ├── user_repository.py      # Репозиторий для пользователя
│   └── task_repository.py      # Репозиторий для задач
│
├── connections/                # Папка с подключением к базе данных и боту
│   ├── __init__.py
│   └── connections.py          # Подключения к базе данных и боту
│
├── states/                     # Папка с состояниями FSM
│   ├── __init__.py
│   └── user_states.py          # Состояния взаимодействия с пользователем
│
├── services/                   # Высокоуровневая логика
│   ├── __init__.py
│   ├── user_service.py         # Логика работы user
│   ├── task_service.py         # Логика работы task
│   └── keyboard_service.py     # Логика работы с keyboard
│
├── .env                        # Конфиг
│
└── requirements.txt            # Файл с пакетами

```
### Описание классов и их методов:

#### 1. ConnectionManager

- **Описание:** Данный класс обрабатывает доступ к подключению бота и базы данных

- **Методы:**
  -  `init_bot(token)`: Инициализация бота
  - `init_db()`: Инициализация базы данных
  - `get_bot(command)`: Получить подключение к боту
  - `get_db_connection()`: Получить подключение к базе данных

#### 2. **Keyboard**

- **Описание:** Модель клавиатур для сообщений

- **Атрибуты:**
  -  Множество различных конфигураций клавиатур для разных ситуаций

#### 3. **Task**
- **Описание:** Базовый класс, который описывает атрибуты для задач
- **Атрибуты:**
	- `id`: Уникальный номер задачи
	- `title`: Название задачи
	- `completed`: Маркер, выполнена ли задача
	- `deadline`: Дата и время, к которым задача должна быть выполнена. 
	- `week_date`: Дата недели, на которой находится неделя
	- `day_date`: Конкретная дата, когда задача запланирована или требует внимания. Помогает в управлении задачами на ежедневной основе.
	- `duration`: Оценочное время, необходимое для выполнения задачи, измеряемое в минутах.

#### 4. #### **User**

- **Описание:** Базовый класс, который описывает атрибуты пользователя в системе.
- **Атрибуты:**
    - `id`: Уникальный идентификатор пользователя.
    - `current_streak`: Текущая последовательность выполнения задач.
    - `max_streak`: Максимальная последовательность выполнения задач.
    - `settings`: Настройки пользователя, представляющие собой объект класса `UserSettings`, который может содержать различные параметры, влияющие на поведение и внешний вид бота.

#### 5. **StreakManager**
- **Описание:** Управляет стриками, наградами и виртуальными днями.
- **Методы:**
  - `calculate_streak()`: Рассчитывает текущий стрик, основываясь на проценте выполненных задач.
  - `check_streak_break()`: Проверяет, не прервался ли стрик.
  - `award_virtual_days()`: Добавляет виртуальные дни за достижения (например, 7 дней подряд выполнения задач).
  - `display_streak_status()`: Отображает текущий статус стрика и награды.

#### 7. **DatabaseInterface**

- **Описание:** Абстрактный базовый класс, который определяет интерфейс для взаимодействия с базой данных.
- **Методы:**
    - `get_user_by_id(user_id: int)`: Абстрактный метод, который получает пользователя по уникальному идентификатору.
    - `create_user(user_data: dict)`: Абстрактный метод, который создает нового пользователя с заданными данными.
    - `update_user(user_id: int, user_data: dict)`: Абстрактный метод, который обновляет информацию о пользователе по его уникальному идентификатору.
    - `delete_user(user_id: int)`: Абстрактный метод, который удаляет пользователя по уникальному идентификатору.

#### 8. **SQLAlchemyRepository**

- **Описание:** Класс, реализующий интерфейс `DatabaseInterface`, который обеспечивает взаимодействие с базой данных с использованием SQLAlchemy. 

- **Методы:**
	- `get_user_by_id(user_id: int)`: Метод, который получает пользователя по уникальному идентификатору.
    - `create_user(user_data: dict)`: Метод, который создает нового пользователя с заданными данными.
    - `update_user(user_id: int, user_data: dict)`: Метод, который обновляет информацию о пользователе по его уникальному идентификатору.
    - `delete_user(user_id: int)`: Метод, который удаляет пользователя по уникальному идентификатору.

#### 9.  **UserRepository**

- **Описание:** Класс, который служит репозиторием для работы с пользователями. Он использует интерфейс `DatabaseInterface` для выполнения операций с базой данных. 
- **Методы:**
    - `get_user(user_id: int)`: Метод, который получает данные пользователя из базы данных, используя интерфейс `DatabaseInterface`. Возвращает объект пользователя по указанному идентификатору.
    - `create_user(user_data: dict)`: Метод, который создает нового пользователя в базе данных через интерфейс `DatabaseInterface`, принимая данные пользователя в виде словаря. Позволяет добавлять новых пользователей в систему.
    - `update_user(user_id: int, user_data: dict)`: Метод, который обновляет данные существующего пользователя в базе данных, используя интерфейс. Принимает идентификатор пользователя и словарь с новыми данными для обновления.
    - `delete_user(user_id: int)`: Метод, который удаляет пользователя из базы данных через интерфейс. Принимает идентификатор пользователя и выполняет удаление.